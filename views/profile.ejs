<!DOCTYPE html>
<html>
    <head>
    <style>
    .ball {
        display: inline-block;
        width: 100%;
        height: 100%;
        border-radius: 100%;
        position: relative;
        background: radial-gradient(circle at bottom, #81e8f6, #76deef 10%, #055194 80%, #062745 100%);
    }
    .ball:before {
        content: "";
        position: absolute;
        top: 1%;
        left: 5%;
        width: 90%;
        height: 90%;
        border-radius: 100%;
        background: radial-gradient(circle at top, white, rgba(255, 255, 255, 0) 58%);
        -webkit-filter: blur(5px);
        filter: blur(5px);
        z-index: 2;
    }
    .ball:after {
        content: "";
        position: absolute;
        display: none;
        top: 5%;
        left: 10%;
        width: 80%;
        height: 80%;
        border-radius: 100%;
        -webkit-filter: blur(1px);
        filter: blur(1px);
        z-index: 2;
        -webkit-transform: rotateZ(-30deg);
        transform: rotateZ(-30deg);
    }
    .ball .shadow {
        position: absolute;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.1) 40%, rgba(0, 0, 0, 0) 50%);
        -webkit-transform: rotateX(90deg) translateZ(-160px);
        transform: rotateX(90deg) translateZ(-160px);
        z-index: 1;
    }
    .ball.plain {
        background: black;
    }
    .ball.plain:before, .ball.plain:after {
        display: none;
    }

        /*BUBBLE COLOR*/
    .ball.bubble {
        background: radial-gradient(circle at 50% 55%, rgba(244, 255, 240, 0.9), rgba(240, 245, 255, 0.9) 40%, rgba(253, 255, 225, 0.8) 60%, rgba(43, 130, 255, 0.4));
        -webkit-animation: bubble-anim 2s ease-out infinite;
        animation: bubble-anim 2s ease-out infinite;
    }
    .ball.bubble:before {
        -webkit-filter: blur(0);
        filter: blur(0);
        height: 80%;
        width: 40%;
        background: radial-gradient(circle at 130% 130%, rgba(255, 255, 255, 0) 0, rgba(255, 255, 255, 0) 46%, rgba(255, 255, 255, 0.8) 50%, rgba(255, 255, 255, 0.8) 58%, rgba(255, 255, 255, 0) 60%, rgba(255, 255, 255, 0) 100%);
        -webkit-transform: translateX(131%) translateY(58%) rotateZ(168deg) rotateX(10deg);
        transform: translateX(131%) translateY(58%) rotateZ(168deg) rotateX(10deg);
    }
    .ball.bubble:after {
        display: block;
        background: radial-gradient(circle at 50% 80%, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0) 74%, white 80%, white 84%, rgba(255, 255, 255, 0) 100%);
    }
  
    .stage {
        width: 500px;
        height: 500px;
        position: relative;
        left: 30vw;
        display: inline-block;
        -webkit-perspective: 1200px;
        -moz-perspective: 1200px;
        -ms-perspective: 1200px;
        -o-perspective: 1200px;
        perspective: 1200px;
        -webkit-perspective-origin: 50% 50%;
        -moz-perspective-origin: 50% 50%;
        -ms-perspective-origin: 50% 50%;
        -o-perspective-origin: 50% 50%;
        perspective-origin: 50% 50%;
    }

    .other_bubble{
        display: inline-block;
        -webkit-perspective: 1200px;
        -moz-perspective: 1200px;
        -ms-perspective: 1200px;
        -o-perspective: 1200px;
        perspective: 1200px;
        -webkit-perspective-origin: 50% 50%;
        -moz-perspective-origin: 50% 50%;
        -ms-perspective-origin: 50% 50%;
        -o-perspective-origin: 50% 50%;
        perspective-origin: 50% 50%;
        position: absolute;
    }

    #bio_bubble{
        width: 300px;
        height: 300px;
        left: 1vw;
        top: 4vh;
        z-index: -1;
    }

    #story_bubble{
        width: 225px;
        height: 225px;
        left: 5vw;
        top: 55vh;
        z-index: -1;
    }

    #posts_bubble{
        width: 350px;
        height: 350px;
        left: 68vw;
        top: 2vh;
        z-index: -1;
    }

    #chat_bubble{
        width: 225px;
        height: 225px;
        left: 63vw;
        top: 55vh;
        z-index: -1;
    }

    #back_bubble{
        margin: 0px;
        padding:0px;
        width: 100px;
        height: 100px;
        left: 85vw;
        top: 65vh;
        z-index: -1;
    }

    #edit {
        position: absolute;
        top: 75vh;
        left: 37.5vw;
        /* margin: 17px; */
        /* font-size: 15px; */
    }

    .inside_bubble{
        margin: 80px;
    }

    #back_bubble_text {
        margin: 20px;
    }

    #inner_img {
        width: 80%;
        height: 80%;
        margin: 10%;
        border-radius: 30%;
    }

    body {
        width: 100vw;
        height: 100vh;
        margin: 20px auto;
        background: linear-gradient(60deg, rgb(228, 135, 197), rgba(148, 223, 240, 0.7)), url('https://cdn.pixabay.com/photo/2016/03/09/09/22/workplace-1245776_960_720.jpg') center no-repeat;
        background-repeat: no-repeat;
        overflow: hidden;
    }

    .stage {
        left: 27vw;
    }

    @-webkit-keyframes bubble-anim {
        0% {
            -webkit-transform: scale(1);
            transform: scale(1);
        }
    
        20% {
            -webkit-transform: scaleY(0.95) scaleX(1.05);
            transform: scaleY(0.95) scaleX(1.05);
        }
    
        48% {
            -webkit-transform: scaleY(1.1) scaleX(0.9);
            transform: scaleY(1.1) scaleX(0.9);
        }
    
        68% {
            -webkit-transform: scaleY(0.98) scaleX(1.02);
            transform: scaleY(0.98) scaleX(1.02);
        }
    
        80% {
            -webkit-transform: scaleY(1.02) scaleX(0.98);
            transform: scaleY(1.02) scaleX(0.98);
        }
    
        97%, 100% {
            -webkit-transform: scale(1);
            transform: scale(1);
        }
    }
  
    @keyframes bubble-anim {
        0% {
        -webkit-transform: scale(1);
        transform: scale(1); }

        20% {
        -webkit-transform: scaleY(0.95) scaleX(1.05);
        transform: scaleY(0.95) scaleX(1.05); }

        48% {
        -webkit-transform: scaleY(1.1) scaleX(0.9);
        transform: scaleY(1.1) scaleX(0.9); }

        68% {
        -webkit-transform: scaleY(0.98) scaleX(1.02);
        transform: scaleY(0.98) scaleX(1.02); }

        80% {
        -webkit-transform: scaleY(1.02) scaleX(0.98);
        transform: scaleY(1.02) scaleX(0.98); }

        97%, 100% {
        -webkit-transform: scale(1);
        transform: scale(1);
        }
    }
    </style>
    </head>
    <body>
        <div id = "main_div"></div>
            <section class="stage">
                <figure class="ball bubble" id = "main_bubble">
                    <img id ="photo" src="" alt="profile_pic" id ="inner_img">
                </figure>
            </section>
            <section class="stage other_bubble" id = "bio_bubble">
                <figure class="ball bubble" >
                    <h1 class = "inside_bubble">bio</h1>
                </figure>
            </section>
            <section class="stage other_bubble" id = "story_bubble">
                <figure class="ball bubble" >
                    <h1 class = "inside_bubble">story</h1>
                </figure>
            </section>
            <section class="stage other_bubble" id = "chat_bubble">
                <figure class="ball bubble" >
                    <h1 class = "inside_bubble">chat</h1>
                </figure>
            </section>
            <section class="stage other_bubble" id = "posts_bubble">
                <figure class="ball bubble" >
                    <h1 class = "inside_bubble">posts</h1>
                </figure>
            </section>
            <input id="edit" type="file" class = "inside_bubble">
            <section class="stage other_bubble" id = "back_bubble">
                <figure class="ball bubble" >
                    <h1 class = "inside_bubble" id = "back_bubble_text">back</h1>
                </figure>
            </section>
        </div>
        <script>
        initialize();

        function initialize() {
            const uploadBtn = document.getElementById('edit');
            uploadBtn.onchange = function() {
                const formData = new FormData();
                formData.append('upload', uploadBtn.files[0]);
                fetch('/uploadImage', {
                    method: 'POST',
                    body: formData,
                }).then(function() {
                    getAndDisplayFiles();
                })
            }

            function getAndDisplayFiles() {
                fetch('/getImages').then(function(response) {
                    response.json().then(function(files) {
                        const photo = document.getElementById('photo');
                        photo.src = '';
                        const img = new Image();
                        // img.src = '/getPic/' + files[files.length - 1];
                        photo.src = '/getPic/' + files[files.length - 1];

                        console.log(files[files.length - 1]);
                    });
                })
            }

            getAndDisplayFiles();
        }
        </script> 
    </body>
</html>